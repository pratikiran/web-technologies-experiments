<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Exmperiment - 5(d)</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
            crossorigin="anonymous"
        />
        <link
            rel="shortcut icon"
            href="https://www.reva.edu.in/assets/demo/default/media/img/logo/favicon-32x32.png"
            type
        />
        <script>
            document.addEventListener("DOMContentLoaded", (event) => {
                let sum = 0;

                const nextButton = document.querySelector(
                    "#inputModal .btn-primary"
                );
                const inputField = document.querySelector(
                    "#inputModal #userInput"
                );
                const closeButtons = document.querySelectorAll(".modal .btn-close");

                closeButtons.forEach((closeButton) => {
                    closeButton.addEventListener("click", () => {
                        sum = 0;
                    });
                });

                nextButton.addEventListener("click", () => {
                    const value = parseFloat(inputField.value);
                    if (!isNaN(value)) {
                        sum += value;
                    }
                    inputField.value = "";
                });

                const yesButton = document.querySelector(
                    "#nextModal #yesButton"
                );
                const inputModalElement = document.getElementById("inputModal");

                yesButton.addEventListener("click", () => {
                    setTimeout(() => {
                        bootstrap.Modal.getInstance(inputModalElement).show();
                    }, 300);
                });

                const noButton = document.querySelector("#nextModal #noButton");
                noButton.addEventListener("click", () => {
                    new bootstrap.Toast(document.querySelector(".toast"), {
                        autohide: true,
                    }).show();
                    document.querySelector(
                        ".toast-body"
                    ).textContent = `Final sum = ${sum}`;
                    sum = 0;
                });
            });
        </script>
    </head>
    <body>
        <div class="px-4 py-4 my-4 text-center">
            <h1 class="display-6 fw-bold text-body-emphasis">
                Experiment - 5(d)
            </h1>
            <div class="px-4 py-4">
                <!-- Button trigger modal -->
                <button
                    type="button"
                    class="btn btn-primary"
                    data-bs-toggle="modal"
                    data-bs-target="#inputModal"
                >
                    Prompt Sum
                </button>

                <!-- Input Modal -->
                <div
                    class="modal fade"
                    id="inputModal"
                    tabindex="-1"
                    aria-labelledby="inputModalLabel"
                    aria-hidden="true"
                >
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h1
                                    class="modal-title fs-5"
                                    id="inputModalLabel"
                                >
                                    Enter a number
                                </h1>
                                <button
                                    type="button"
                                    class="btn-close"
                                    data-bs-dismiss="modal"
                                    aria-label="Close"
                                ></button>
                            </div>
                            <div class="modal-body">
                                <div class="form-group">
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="userInput"
                                        name="userInput"
                                    />
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button
                                    type="button"
                                    class="btn btn-primary"
                                    data-bs-dismiss="modal"
                                    data-bs-toggle="modal"
                                    data-bs-target="#nextModal"
                                >
                                    Next
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal -->
                <div
                    class="modal fade"
                    id="nextModal"
                    tabindex="-1"
                    aria-labelledby="nextModalLabel"
                    aria-hidden="true"
                >
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h1
                                    class="modal-title fs-5"
                                    id="nextModalLabel"
                                >
                                    Add another number
                                </h1>
                                <button
                                    type="button"
                                    class="btn-close"
                                    data-bs-dismiss="modal"
                                    aria-label="Close"
                                ></button>
                            </div>
                            <div class="modal-body">
                                Do you want to add another number?
                            </div>
                            <div class="modal-footer">
                                <button
                                    type="button"
                                    class="btn btn-primary"
                                    id="yesButton"
                                    data-bs-dismiss="modal"
                                >
                                    Yes
                                </button>
                                <button
                                    type="button"
                                    class="btn btn-secondary"
                                    id="noButton"
                                    data-bs-dismiss="modal"
                                >
                                    No
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Toast for the final sum -->
        <div
            class="toast align-items-center text-white bg-primary border-0 position-absolute bottom-0 end-0 m-3"
            role="alert"
            aria-live="assertive"
            aria-atomic="true"
        >
            <div class="d-flex">
                <div class="toast-body">Final sum = 0</div>
                <button
                    type="button"
                    class="btn-close btn-close-white me-2 m-auto"
                    data-bs-dismiss="toast"
                    aria-label="Close"
                ></button>
            </div>
        </div>

        <script
            src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
            integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
            crossorigin="anonymous"
        ></script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js"
            integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa"
            crossorigin="anonymous"
        ></script>
    </body>
</html>
